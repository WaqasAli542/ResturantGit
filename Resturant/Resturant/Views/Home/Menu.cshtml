@{
    ViewBag.Title = "Menu";
}
@model Resturant.Models.Cousine
@using Resturant.Models;
<!-- Fixed navbar -->
@if (ViewBag.Session == null)
{
<link href="~/Content/jquery-ui.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-ui-1.8.24.min.js"></script>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
                <a class="navbar-brand" href="#"><img src="~/Content/AdminThemeFiles/images/logo.png" alt=""></a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="#">About</a></li>
                    <li><a href="#about">Menu</a></li>
                    <li><a href="#contact">Location</a></li>
                    <li><a href="#contact">CATERING</a></li>
                    <li><a href="#contact">CAREERS</a></li>
                    <li><a href="#contact">CONTACT</a></li>
                    <li class="order-online"><a href="#contact">Order Online</a></li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
    </nav>
}
else
{
    <nav class="navbar navbar-inverse navbar-fixed-top nav-small">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#"><img src="~/Content/images/logo.png" alt=""></a>
            </div>
            <a class="cutom-anc" href="#"><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span></a>
            <ul class="custom-nav">
                <li> <a class="active" href="#">Fingers &amp; Poppers</a> </li>
                <li> <a href="#">Signature Creations</a> </li>
                <li> <a href="#">Sandwiches</a> </li>
                <li> <a href="#">Wraps / Salads</a> </li>
                <li> <a href="#">Sides</a> </li>
                <li> <a href="#">Sauce</a> </li>
                <li> <a href="#">Drinks</a> </li>
            </ul>
            <div class="order-now-top-button"> <a href="#">Checkout</a> </div>
            <a class="login-small" href="#"><img src="~/Content/images/user.png" alt=""></a> <span class="shopping-cart" onclick="ShowBasket()">10</span>
            <!--/.nav-collapse -->

        </div>
    </nav>

    <div class="checkout" style="margin-top:6%;">
        <div class="checkoutInner">
            <h4>Order Summary</h4>
            <table class="checkoutinner-detail table">
                <tr>
                    <td width="50%">LOCATION</td>
                    <td>Financial District</td>
                </tr>
                <tr>
                    <td>ORDER TYPE</td>
                    <td class="col-yellow">Pick-Up</td>
                </tr>
                <tr>
                    <td>PICK-UP TIME</td>
                    <td>
                        <div class="select-wrapper blackSelect maxw300">
                            <select class="form-control w108P">
                                <option>Today</option>
                            </select>
                        </div>
                    </td>
                </tr>
            </table>
            <h5 class="col-yellow text-center">Current wait is 15 minutes</h5>
            <div class="checkout-buttons">
                <button class="btn btn-primary btn-block">CHECKOUT</button>
                <button class="btn btn-default  btn-block">BACK TO MENU</button>
            </div>
            <h4>YOUR ITEMS</h4>
            <div class="list-detail">
                <ul>
                    
                    <li>
                        <ul class="sb-item-mods js-item-mods">
                            <li><span>+ </span><span>Wrap</span></li>
                            <li><span>+ </span><span>Small Classic Fry</span> <span>$<span>2.65</span></span></li>
                            <li><span>+ </span><span>General Sticky Tso</span> <span>$<span>0.85</span></span></li>
                            <li><span>+ </span><span>Caramel</span> <span>$<span>0.85</span></span></li>
                            <li><span>+ </span><span>Wasabi Aioli</span> <span>$<span>0.85</span></span></li>
                            <li><span>+ </span><span>Nashville Numb</span> <span>$<span>0.85</span></span></li>
                            <li><span>+ </span><span>Cray Sauce</span> <span>$<span>0.85</span></span></li>
                        </ul>


                    <li class="sb-total"> <label>Order Total</label> <p class="pull-right">$<span>140.00</span></p></li>

                </ul>
                <ul>
                   
                    <li>
                        <ul class="sb-item-mods js-item-mods">
                            <li><span>+ </span><span>Wrap</span></li>
                            <li><span>+ </span><span>Small Classic Fry</span> <span>$<span>2.65</span></span></li>
                            <li><span>+ </span><span>General Sticky Tso</span> <span>$<span>0.85</span></span></li>
                            <li><span>+ </span><span>Caramel</span> <span>$<span>0.85</span></span></li>
                            <li><span>+ </span><span>Wasabi Aioli</span> <span>$<span>0.85</span></span></li>
                            <li><span>+ </span><span>Nashville Numb</span> <span>$<span>0.85</span></span></li>
                            <li><span>+ </span><span>Cray Sauce</span> <span>$<span>0.85</span></span></li>
                        </ul>


                    <li class="sb-total"> <label>Order Total</label> <p class="pull-right">$<span>140.00</span></p></li>

                </ul>
            </div>
        </div>
    </div>
}








<div class="container-fluid menu-bg" style="margin-top:-0.02%;">
    <div class="row">
        <div class="col-xs-12">
            <div class="bg-white maxw800 menu-wrapper">
                <h2 class="text-center">MENU</h2>
                <h3 class="text-center">PLEASE CHOOSE A LOCATION</h3>
                <div class="select-wrapper blackSelect maxw300">
                    <select class="form-control w108P">
                        <option>Today</option>
                    </select>
                </div>
                <h3 class="text-center mb30">FIND OUR GREENWICH VILLAGE MENU BELOW.</h3>
                <p class="text-center mb30"><a class="btn btn-primary" href="#">ORDER NOW</a></p>

                @foreach (Category c in Model.Categories)
                {
                    <div class="menu-category">
                        <h4>@c.Name</h4>
                        <div class="dots"> &nbsp; </div>
                        @foreach (Food food in c.Foods)
                        {

                            <h4>@food.Name</h4>
                            <h5 class="colRed">@food.Tageline</h5>
                            <table class="table m0">
                                @{
                            food.FoodItems = food.FoodItems.OrderBy(item => item.Price).ToList();

                                }
                                @foreach (FoodItem fItem in food.FoodItems)
                                {
                                    <tr>
                                        <td>
                                            <h3 class="m0">
                                                <a data-toggle="modal" data-id=@fItem.Id title="Add this item" class="open-ItemsAddon btn " href="#FooAddonDialog">@fItem.Size</a>
                                            </h3>
                                        </td>
                                        <td class="price text-right">$ @fItem.Price</td>
                                    </tr>
                                }

                            </table>

                        }
                    </div>
                }
                <div class="clr"></div>
            </div>
            <p class="text-center mt20">* Extra charge for additional ingredients.</p>
        </div>
    </div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script>
    function displayFoodModal(FoodItemId) {
        $.ajax({
            dataType: "json",
            type: "GET",
            url: '@Url.Action("GetFoodItem", "Home")',
            contentType: "application/json; charset=utf-8",
            data: { foodItemID: FoodItemId },
            success: function (response) {
                var $el = $("#Fooddescription");
                $el.empty(); // remove old options
                $el.append($("<h3 class='modal-title' id='myModalLabel'>" + response.Size + "<span class='pull-right'> $" + response.Price + "</span></h3>"))


            },
            error: function (response) { alert(response); }

        });

    }
    function displayAddonModal(FoodItemId) {
        $.ajax({
            dataType: "json",
            type: "GET",
            url: '@Url.Action("GetAddOnByFoodId", "Home")',
            contentType: "application/json; charset=utf-8",
            data: { foodItemID: FoodItemId },
            success: function (response) {
                var $el = $("#modalTable");
                $el.empty(); // remove old options

                $.each(response, function (value, key) {


                    $el.append($("<tr> <td width='50%'><input id='checkbox3' type='checkbox' name= '" + key.Id + "' value='" + key.Id + "'>  <label>" + key.Name + "</label> <span class='pull-right'>  $ " + key.Price + "</span></td></tr>"))

                });
            },
            error: function (response) { alert(response); }

        });

    }


    function ShowBasket() {
        $.ajax({
            dataType: "json",
            type: "GET",
            url: '@Url.Action("GetOrder", "Home")',
            contentType: "application/json; charset=utf-8",
            data: { },
            success: function (response) {
                var $el = $("#modalTable");
                $el.empty(); // remove old options
                $.each(response, function (value, key) {
                    $el.append($("<tr> <td width='50%'><input id='checkbox3' type='checkbox' name= '" + key.Id + "' value='" + key.Id + "'>  <label>" + key.Name + "</label> <span class='pull-right'>  $ " + key.Price + "</span></td></tr>"))

                });
            },
            error: function (response) { alert(response); }

        });

    }


    $(document).on("click", ".open-ItemsAddon", function () {

        var myFoodItemId = $(this).data('id');
        $(".modal-body #foodItemId").val(myFoodItemId);
        var $el = $("#modalTable");
        $el.empty(); // remove old options

        displayAddonModal(myFoodItemId);
        displayFoodModal(myFoodItemId);
        // As pointed out in comments,
        // it is superfluous to have to manually call the modal.
        $('#show_AddOns').toggle();
        // $('#addBookDialog').modal('show');
    });


</script>

<div id="FooAddonDialog" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <div id="Fooddescription"></div>

            </div>
            <form action="AddtoOrder" method="post">
                <div class="modal-body">
                    <h4>Add it into the Basket<small></small></h4>
                    <table id="modalTable" class="table mb0">
                        <tr>
                            <td width="50%">
                                <input id="checkbox3" type="checkbox" name="" value="3">
                                <label>SMALL CLASSIC FRY</label>
                                <span class="pull-right"> $0.92</span>
                            </td>
                            <td width="50%">
                                <input id="checkbox3" type="checkbox" name="" value="3">
                                <label>SMALL CAJUN FRY</label>
                            </td>
                        </tr>
                    </table>
                    <input type="text" hidden id="foodItemId" name="foodItemId" />
                    <div class="dots mt0 mb0">&nbsp;</div>
                    <div class="row">
                        <div class="col-sm-4">
                            <h4>QUANTITY</h4>
                            <input class="spinner">
                        </div>
                        <div class="col-sm-8">
                            <h4>SPECIAL INSTRUCTIONSAnything <small>we need to be aware of?</small></h4>
                            <textarea class="form-control custom-textarea" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <input type="submit" class="btn btn-primary" value="ADD to Order" />
                </div>
            </form>
        </div>
    </div>
</div>
